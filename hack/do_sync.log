++ uname
+ [[ Linux != \L\i\n\u\x ]]
+ DRY_RUN=false
++ go version
+ [[ ! go version go1.24.3 linux/arm64 =~ go1.24 ]]
+ TRASH=trash
+ command -v trash
/home/mauriciopoppe.linux/n/bin/trash
+ mkdir -p tmp pkg cmd/csi-sidecars/ staging/src/github.com/kubernetes-csi/
+ for i in attacher,master provisioner,master resizer,master
+ IFS=,
+ read SIDECAR SIDECAR_HASH
+ [[ ! -d pkg/attacher ]]
+ git clone --depth 1 https://github.com/kubernetes-csi/external-attacher pkg/attacher
Cloning into 'pkg/attacher'...
+ cd pkg/attacher
+ git checkout master
Already on 'master'
Your branch is up to date with 'origin/master'.
+ cd pkg/attacher
+ git rev-parse --short HEAD
b58cdfc
+ cat pkg/attacher/go.mod
+ grep '	'
+ grep -v indirect
+ cat pkg/attacher/go.mod
+ grep 'replace '
+ cat pkg/attacher/go.mod
+ grep 'replace k8s.io/api =>'
+ trash pkg/attacher/.git
+ trash pkg/attacher/.github
+ trash pkg/attacher/vendor
+ trash pkg/attacher/release-tools
+ trash pkg/attacher/go.mod
+ trash pkg/attacher/go.sum
+ trash pkg/attacher/Dockerfile
+ trash pkg/attacher/.cloudbuild.sh
+ trash pkg/attacher/cloudbuild.yaml
+ trash pkg/attacher/.prow.sh
+ trash pkg/attacher/OWNER_ALIASES
+ trash pkg/attacher/Makefile
+ cd pkg/attacher
+ find . -type f -exec grep -q github.com/kubernetes-csi/external-attacher/ --files-with-matches '{}' ';' -print
./cmd/csi-attacher/main.go
./CHANGELOG/CHANGELOG-1.1.md
./CHANGELOG/CHANGELOG-3.1.md
./CHANGELOG/CHANGELOG-4.0.md
./CHANGELOG/CHANGELOG-4.1.md
./CHANGELOG/CHANGELOG-3.3.md
./CHANGELOG/CHANGELOG-4.6.md
./CHANGELOG/CHANGELOG-3.2.md
./CHANGELOG/CHANGELOG-3.4.md
./CHANGELOG/CHANGELOG-3.5.md
./CHANGELOG/CHANGELOG-2.1.md
./CHANGELOG/CHANGELOG-4.7.md
./CHANGELOG/CHANGELOG-2.2.md
./CHANGELOG/CHANGELOG-3.0.md
./CHANGELOG/CHANGELOG-4.9.md
./CHANGELOG/CHANGELOG-1.2.md
./CHANGELOG/CHANGELOG-4.2.md
./CHANGELOG/CHANGELOG-2.0.md
./CHANGELOG/CHANGELOG-4.8.md
./CHANGELOG/CHANGELOG-4.3.md
./CHANGELOG/CHANGELOG-4.5.md
./pkg/controller/csi_handler_test.go
./pkg/controller/csi_handler.go
./pkg/controller/trivial_handler_test.go
./pkg/controller/framework_test.go
./pkg/controller/controller.go
./pkg/attacher/attacher_test.go
+ cd pkg/attacher
+ find . -type f -exec grep -q github.com/kubernetes-csi/external-attacher/ --files-with-matches '{}' ';' -print
+ xargs sed -E -i.bak 's%github.com/kubernetes-csi/external-attacher/(v[0-9]+/)?%github.com/kubernetes-csi/csi-sidecars/pkg/attacher/%g'
+ for FILE in pkg/${SIDECAR}/cmd/csi-${SIDECAR}/*.go
++ basename pkg/attacher/cmd/csi-attacher/main.go
+ NEW_FILE=cmd/csi-sidecars/attacher_main.go
+ cp -v -- pkg/attacher/cmd/csi-attacher/main.go cmd/csi-sidecars/attacher_main.go
'pkg/attacher/cmd/csi-attacher/main.go' -> 'cmd/csi-sidecars/attacher_main.go'
+ sed -i.bak 's/func main()/func attacher_main(ctx context.Context)/g' cmd/csi-sidecars/attacher_main.go
+ sed -i.bak '/^var (/,/^)/d' cmd/csi-sidecars/attacher_main.go
+ sed -i.bak '/ctx :=/d' cmd/csi-sidecars/attacher_main.go
+ sed -i.bak 's/context.TODO()/ctx/g' cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /flag.Var/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /featuregate.NewFeatureGate/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /logsapi.AddFeatureGates/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak '/Options are:/d' cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /logsapi.NewLoggingConfiguration/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /logsapi.AddGoFlags/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /logsapi.AddFlags/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /logs.InitLogs/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /flag.Parse/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak '/logsapi.ValidateAndApply/,/}/d' cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /klog.InitFlags/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /logtostderr/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak '/utilfeature.DefaultMutableFeatureGate/,/}/d' cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /flag.CommandLine.AddGoFlagSet/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /standardflags.AddAutomaxprocs/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /goflag/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak '/flag"/d' cmd/csi-sidecars/attacher_main.go
+ sed -i.bak '/featuregate"/d' cmd/csi-sidecars/attacher_main.go
+ sed -i.bak /logs/d cmd/csi-sidecars/attacher_main.go
+ sed -i.bak '/csi-lib-utils\/standardflags/d' cmd/csi-sidecars/attacher_main.go
+ '[' attacher = resizer ']'
+ [[ attacher == \a\t\t\a\c\h\e\r ]]
+ rm pkg/attacher/cmd/csi-attacher/main.go
+ symlink_from_root_to_hack hack/pkg/attacher/cmd/csi-attacher/main.go
+ file=hack/pkg/attacher/cmd/csi-attacher/main.go
+ file_without_hack=pkg/attacher/cmd/csi-attacher/main.go
++ dirname pkg/attacher/cmd/csi-attacher/main.go
+ mkdir -p pkg/attacher/cmd/csi-attacher
+ ln -s /home/mauriciopoppe.linux/go/src/github.com/mauriciopoppe/csi-sidecars-aio-poc/hack/pkg/attacher/cmd/csi-attacher/main.go /home/mauriciopoppe.linux/go/src/github.com/mauriciopoppe/csi-sidecars-aio-poc/pkg/attacher/cmd/csi-attacher/main.go
+ for i in attacher,master provisioner,master resizer,master
+ IFS=,
+ read SIDECAR SIDECAR_HASH
+ [[ ! -d pkg/provisioner ]]
+ git clone --depth 1 https://github.com/kubernetes-csi/external-provisioner pkg/provisioner
Cloning into 'pkg/provisioner'...
+ cd pkg/provisioner
+ git checkout master
Already on 'master'
Your branch is up to date with 'origin/master'.
+ cd pkg/provisioner
+ git rev-parse --short HEAD
be69ca2
+ cat pkg/provisioner/go.mod
+ grep '	'
+ grep -v indirect
+ cat pkg/provisioner/go.mod
+ grep 'replace '
+ cat pkg/provisioner/go.mod
+ grep 'replace k8s.io/api =>'
+ trash pkg/provisioner/.git
+ trash pkg/provisioner/.github
+ trash pkg/provisioner/vendor
+ trash pkg/provisioner/release-tools
+ trash pkg/provisioner/go.mod
+ trash pkg/provisioner/go.sum
+ trash pkg/provisioner/Dockerfile
+ trash pkg/provisioner/.cloudbuild.sh
+ trash pkg/provisioner/cloudbuild.yaml
+ trash pkg/provisioner/.prow.sh
+ trash pkg/provisioner/OWNER_ALIASES
+ trash pkg/provisioner/Makefile
+ cd pkg/provisioner
+ find . -type f -exec grep -q github.com/kubernetes-csi/external-provisioner/ --files-with-matches '{}' ';' -print
./cmd/csi-provisioner/csi-provisioner.go
./CHANGELOG/CHANGELOG-1.1.md
./CHANGELOG/CHANGELOG-5.3.md
./CHANGELOG/CHANGELOG-3.1.md
./CHANGELOG/CHANGELOG-4.0.md
./CHANGELOG/CHANGELOG-3.3.md
./CHANGELOG/CHANGELOG-3.2.md
./CHANGELOG/CHANGELOG-3.4.md
./CHANGELOG/CHANGELOG-1.5.md
./CHANGELOG/CHANGELOG-1.6.md
./CHANGELOG/CHANGELOG-2.1.md
./CHANGELOG/CHANGELOG-2.2.md
./CHANGELOG/CHANGELOG-5.0.md
./CHANGELOG/CHANGELOG-3.0.md
./CHANGELOG/CHANGELOG-5.1.md
./CHANGELOG/CHANGELOG-1.4.md
./CHANGELOG/CHANGELOG-1.2.md
./CHANGELOG/CHANGELOG-5.2.md
./CHANGELOG/CHANGELOG-2.0.md
./CHANGELOG/CHANGELOG-1.3.md
./pkg/controller/topology.go
./pkg/controller/controller_test.go
./pkg/controller/fake_translator_test.go
./pkg/controller/controller.go
./pkg/capacity/capacity.go
./pkg/capacity/capacity_test.go
./extras/docker/Dockerfile.builder
./test/e2e/e2e_test.go
+ cd pkg/provisioner
+ find . -type f -exec grep -q github.com/kubernetes-csi/external-provisioner/ --files-with-matches '{}' ';' -print
+ xargs sed -E -i.bak 's%github.com/kubernetes-csi/external-provisioner/(v[0-9]+/)?%github.com/kubernetes-csi/csi-sidecars/pkg/provisioner/%g'
+ for FILE in pkg/${SIDECAR}/cmd/csi-${SIDECAR}/*.go
++ basename pkg/provisioner/cmd/csi-provisioner/csi-provisioner.go
+ NEW_FILE=cmd/csi-sidecars/provisioner_csi-provisioner.go
+ cp -v -- pkg/provisioner/cmd/csi-provisioner/csi-provisioner.go cmd/csi-sidecars/provisioner_csi-provisioner.go
'pkg/provisioner/cmd/csi-provisioner/csi-provisioner.go' -> 'cmd/csi-sidecars/provisioner_csi-provisioner.go'
+ sed -i.bak 's/func main()/func provisioner_main(ctx context.Context)/g' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak '/^var (/,/^)/d' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak '/ctx :=/d' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak 's/context.TODO()/ctx/g' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /flag.Var/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /featuregate.NewFeatureGate/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /logsapi.AddFeatureGates/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak '/Options are:/d' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /logsapi.NewLoggingConfiguration/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /logsapi.AddGoFlags/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /logsapi.AddFlags/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /logs.InitLogs/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /flag.Parse/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak '/logsapi.ValidateAndApply/,/}/d' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /klog.InitFlags/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /logtostderr/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak '/utilfeature.DefaultMutableFeatureGate/,/}/d' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /flag.CommandLine.AddGoFlagSet/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /standardflags.AddAutomaxprocs/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /goflag/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak '/flag"/d' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak '/featuregate"/d' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak /logs/d cmd/csi-sidecars/provisioner_csi-provisioner.go
+ sed -i.bak '/csi-lib-utils\/standardflags/d' cmd/csi-sidecars/provisioner_csi-provisioner.go
+ '[' provisioner = resizer ']'
+ for FILE in pkg/${SIDECAR}/cmd/csi-${SIDECAR}/*.go
++ basename pkg/provisioner/cmd/csi-provisioner/util.go
+ NEW_FILE=cmd/csi-sidecars/provisioner_util.go
+ cp -v -- pkg/provisioner/cmd/csi-provisioner/util.go cmd/csi-sidecars/provisioner_util.go
'pkg/provisioner/cmd/csi-provisioner/util.go' -> 'cmd/csi-sidecars/provisioner_util.go'
+ sed -i.bak 's/func main()/func provisioner_main(ctx context.Context)/g' cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak '/^var (/,/^)/d' cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak '/ctx :=/d' cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak 's/context.TODO()/ctx/g' cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /flag.Var/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /featuregate.NewFeatureGate/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /logsapi.AddFeatureGates/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak '/Options are:/d' cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /logsapi.NewLoggingConfiguration/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /logsapi.AddGoFlags/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /logsapi.AddFlags/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /logs.InitLogs/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /flag.Parse/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak '/logsapi.ValidateAndApply/,/}/d' cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /klog.InitFlags/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /logtostderr/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak '/utilfeature.DefaultMutableFeatureGate/,/}/d' cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /flag.CommandLine.AddGoFlagSet/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /standardflags.AddAutomaxprocs/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /goflag/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak '/flag"/d' cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak '/featuregate"/d' cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak /logs/d cmd/csi-sidecars/provisioner_util.go
+ sed -i.bak '/csi-lib-utils\/standardflags/d' cmd/csi-sidecars/provisioner_util.go
+ '[' provisioner = resizer ']'
+ for FILE in pkg/${SIDECAR}/cmd/csi-${SIDECAR}/*.go
++ basename pkg/provisioner/cmd/csi-provisioner/util_test.go
+ NEW_FILE=cmd/csi-sidecars/provisioner_util_test.go
+ cp -v -- pkg/provisioner/cmd/csi-provisioner/util_test.go cmd/csi-sidecars/provisioner_util_test.go
'pkg/provisioner/cmd/csi-provisioner/util_test.go' -> 'cmd/csi-sidecars/provisioner_util_test.go'
+ sed -i.bak 's/func main()/func provisioner_main(ctx context.Context)/g' cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak '/^var (/,/^)/d' cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak '/ctx :=/d' cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak 's/context.TODO()/ctx/g' cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /flag.Var/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /featuregate.NewFeatureGate/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /logsapi.AddFeatureGates/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak '/Options are:/d' cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /logsapi.NewLoggingConfiguration/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /logsapi.AddGoFlags/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /logsapi.AddFlags/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /logs.InitLogs/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /flag.Parse/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak '/logsapi.ValidateAndApply/,/}/d' cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /klog.InitFlags/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /logtostderr/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak '/utilfeature.DefaultMutableFeatureGate/,/}/d' cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /flag.CommandLine.AddGoFlagSet/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /standardflags.AddAutomaxprocs/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /goflag/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak '/flag"/d' cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak '/featuregate"/d' cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak /logs/d cmd/csi-sidecars/provisioner_util_test.go
+ sed -i.bak '/csi-lib-utils\/standardflags/d' cmd/csi-sidecars/provisioner_util_test.go
+ '[' provisioner = resizer ']'
+ [[ provisioner == \a\t\t\a\c\h\e\r ]]
+ for i in attacher,master provisioner,master resizer,master
+ IFS=,
+ read SIDECAR SIDECAR_HASH
+ [[ ! -d pkg/resizer ]]
+ git clone --depth 1 https://github.com/kubernetes-csi/external-resizer pkg/resizer
Cloning into 'pkg/resizer'...
+ cd pkg/resizer
+ git checkout master
Already on 'master'
Your branch is up to date with 'origin/master'.
+ cd pkg/resizer
+ git rev-parse --short HEAD
d6833d0
+ cat pkg/resizer/go.mod
+ grep '	'
+ grep -v indirect
+ cat pkg/resizer/go.mod
+ grep 'replace '
+ cat pkg/resizer/go.mod
+ grep 'replace k8s.io/api =>'
+ trash pkg/resizer/.git
+ trash pkg/resizer/.github
+ trash pkg/resizer/vendor
+ trash pkg/resizer/release-tools
+ trash pkg/resizer/go.mod
+ trash pkg/resizer/go.sum
+ trash pkg/resizer/Dockerfile
+ trash pkg/resizer/.cloudbuild.sh
+ trash pkg/resizer/cloudbuild.yaml
+ trash pkg/resizer/.prow.sh
+ trash pkg/resizer/OWNER_ALIASES
+ trash pkg/resizer/Makefile
+ cd pkg/resizer
+ find . -type f -exec grep -q github.com/kubernetes-csi/external-resizer/ --files-with-matches '{}' ';' -print
./cmd/csi-resizer/main.go
./CHANGELOG/CHANGELOG-1.1.md
./CHANGELOG/CHANGELOG-0.5.md
./CHANGELOG/CHANGELOG-1.7.md
./CHANGELOG/CHANGELOG-0.3.md
./CHANGELOG/CHANGELOG-1.11.md
./CHANGELOG/CHANGELOG-0.4.md
./CHANGELOG/CHANGELOG-1.5.md
./CHANGELOG/CHANGELOG-1.6.md
./CHANGELOG/CHANGELOG-0.2.md
./CHANGELOG/CHANGELOG-0.1.md
./CHANGELOG/CHANGELOG-1.10.md
./CHANGELOG/CHANGELOG-1.4.md
./CHANGELOG/CHANGELOG-1.2.md
./CHANGELOG/CHANGELOG-1.0.md
./CHANGELOG/CHANGELOG-1.13.md
./CHANGELOG/CHANGELOG-1.3.md
./pkg/resizer/csi_resizer.go
./pkg/resizer/csi_resizer_test.go
./pkg/resizer/trivial_resizer.go
./pkg/modifier/csi_modifier_test.go
./pkg/modifier/csi_modifier.go
./pkg/controller/resize_status.go
./pkg/controller/controller_test.go
./pkg/controller/expand_and_recover_test.go
./pkg/controller/resize_status_test.go
./pkg/controller/expand_and_recover.go
./pkg/controller/controller.go
./pkg/modifycontroller/modify_status.go
./pkg/modifycontroller/modify_status_test.go
./pkg/modifycontroller/controller_test.go
./pkg/modifycontroller/modify_volume.go
./pkg/modifycontroller/modify_volume_test.go
./pkg/modifycontroller/controller.go
+ cd pkg/resizer
+ find . -type f -exec grep -q github.com/kubernetes-csi/external-resizer/ --files-with-matches '{}' ';' -print
+ xargs sed -E -i.bak 's%github.com/kubernetes-csi/external-resizer/(v[0-9]+/)?%github.com/kubernetes-csi/csi-sidecars/pkg/resizer/%g'
+ for FILE in pkg/${SIDECAR}/cmd/csi-${SIDECAR}/*.go
++ basename pkg/resizer/cmd/csi-resizer/main.go
+ NEW_FILE=cmd/csi-sidecars/resizer_main.go
+ cp -v -- pkg/resizer/cmd/csi-resizer/main.go cmd/csi-sidecars/resizer_main.go
'pkg/resizer/cmd/csi-resizer/main.go' -> 'cmd/csi-sidecars/resizer_main.go'
+ sed -i.bak 's/func main()/func resizer_main(ctx context.Context)/g' cmd/csi-sidecars/resizer_main.go
+ sed -i.bak '/^var (/,/^)/d' cmd/csi-sidecars/resizer_main.go
+ sed -i.bak '/ctx :=/d' cmd/csi-sidecars/resizer_main.go
+ sed -i.bak 's/context.TODO()/ctx/g' cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /flag.Var/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /featuregate.NewFeatureGate/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /logsapi.AddFeatureGates/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak '/Options are:/d' cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /logsapi.NewLoggingConfiguration/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /logsapi.AddGoFlags/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /logsapi.AddFlags/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /logs.InitLogs/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /flag.Parse/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak '/logsapi.ValidateAndApply/,/}/d' cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /klog.InitFlags/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /logtostderr/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak '/utilfeature.DefaultMutableFeatureGate/,/}/d' cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /flag.CommandLine.AddGoFlagSet/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /standardflags.AddAutomaxprocs/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /goflag/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak '/flag"/d' cmd/csi-sidecars/resizer_main.go
+ sed -i.bak '/featuregate"/d' cmd/csi-sidecars/resizer_main.go
+ sed -i.bak /logs/d cmd/csi-sidecars/resizer_main.go
+ sed -i.bak '/csi-lib-utils\/standardflags/d' cmd/csi-sidecars/resizer_main.go
+ '[' resizer = resizer ']'
+ sed -i.bak /strings/d cmd/csi-sidecars/resizer_main.go
+ [[ resizer == \a\t\t\a\c\h\e\r ]]
+ echo 'Sanity checks'
Sanity checks
+ echo 'Check that the k8s.io dependencies match'
Check that the k8s.io dependencies match
++ cat tmp/gomod-k8sapi.txt
++ sort
++ uniq
++ wc -l
+ [[ 2 -gt 1 ]]
+ echo 'There are multiple k8s.io versions as dependencies from sidecars!'
There are multiple k8s.io versions as dependencies from sidecars!
+ echo 'Check the go.mod of each sidecar and verify that the k8s.io dependecies match'
Check the go.mod of each sidecar and verify that the k8s.io dependecies match
+ cat tmp/gomod-k8sapi.txt
replace k8s.io/api => k8s.io/api v0.34.0
replace k8s.io/api => k8s.io/api v0.33.0
replace k8s.io/api => k8s.io/api v0.34.0
+ exit 1
